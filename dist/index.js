"use strict";

var _cli = require("./cli");

var _encode = require("./encode");

var _decode = require("./decode");

var _stream = require("stream");

var _fs = _interopRequireDefault(require("fs"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var transformStream = _cli.options.action === 'encode' ? new _encode.EncodeStream() : new _decode.DecodeStream();
var inputStream = !!_cli.options.input ? _fs["default"].createReadStream(_cli.options.input) : process.stdin;
var outputStream = !!_cli.options.output ? _fs["default"].createWriteStream(_cli.options.output) : process.stdout;
(0, _stream.pipeline)(inputStream, transformStream, outputStream, function (err) {
  if (err) {
    console.error('Pipeline failed.', err);
  } else {
    console.log('Pipeline succeeded.');
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJ0cmFuc2Zvcm1TdHJlYW0iLCJvcHRpb25zIiwiYWN0aW9uIiwiRW5jb2RlU3RyZWFtIiwiRGVjb2RlU3RyZWFtIiwiaW5wdXRTdHJlYW0iLCJpbnB1dCIsImZzIiwiY3JlYXRlUmVhZFN0cmVhbSIsInByb2Nlc3MiLCJzdGRpbiIsIm91dHB1dFN0cmVhbSIsIm91dHB1dCIsImNyZWF0ZVdyaXRlU3RyZWFtIiwic3Rkb3V0IiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibG9nIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsSUFBTUEsZUFBZSxHQUFHQyxhQUFRQyxNQUFSLEtBQW1CLFFBQW5CLEdBQ3BCLElBQUlDLG9CQUFKLEVBRG9CLEdBRXBCLElBQUlDLG9CQUFKLEVBRko7QUFJQSxJQUFNQyxXQUFXLEdBQUcsQ0FBQyxDQUFDSixhQUFRSyxLQUFWLEdBQ2hCQyxlQUFHQyxnQkFBSCxDQUFvQlAsYUFBUUssS0FBNUIsQ0FEZ0IsR0FFaEJHLE9BQU8sQ0FBQ0MsS0FGWjtBQUlBLElBQU1DLFlBQVksR0FBRyxDQUFDLENBQUNWLGFBQVFXLE1BQVYsR0FDakJMLGVBQUdNLGlCQUFILENBQXFCWixhQUFRVyxNQUE3QixDQURpQixHQUVqQkgsT0FBTyxDQUFDSyxNQUZaO0FBSUEsc0JBQ0VULFdBREYsRUFFRUwsZUFGRixFQUdFVyxZQUhGLEVBSUUsVUFBQ0ksR0FBRCxFQUFTO0FBQ1AsTUFBSUEsR0FBSixFQUFTO0FBQ1BDLElBQUFBLE9BQU8sQ0FBQ0MsS0FBUixDQUFjLGtCQUFkLEVBQWtDRixHQUFsQztBQUNELEdBRkQsTUFFTztBQUNMQyxJQUFBQSxPQUFPLENBQUNFLEdBQVIsQ0FBWSxxQkFBWjtBQUNEO0FBQ0YsQ0FWSCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG9wdGlvbnMgfSBmcm9tICcuL2NsaSc7XHJcbmltcG9ydCB7IEVuY29kZVN0cmVhbSB9IGZyb20gJy4vZW5jb2RlJztcclxuaW1wb3J0IHsgRGVjb2RlU3RyZWFtIH0gZnJvbSAnLi9kZWNvZGUnO1xyXG5pbXBvcnQgeyBwaXBlbGluZSB9IGZyb20gJ3N0cmVhbSc7XHJcbmltcG9ydCBmcyBmcm9tICdmcyc7XHJcblxyXG5jb25zdCB0cmFuc2Zvcm1TdHJlYW0gPSBvcHRpb25zLmFjdGlvbiA9PT0gJ2VuY29kZSdcclxuICA/IG5ldyBFbmNvZGVTdHJlYW0oKVxyXG4gIDogbmV3IERlY29kZVN0cmVhbSgpO1xyXG5cclxuY29uc3QgaW5wdXRTdHJlYW0gPSAhIW9wdGlvbnMuaW5wdXRcclxuICA/IGZzLmNyZWF0ZVJlYWRTdHJlYW0ob3B0aW9ucy5pbnB1dClcclxuICA6IHByb2Nlc3Muc3RkaW47XHJcblxyXG5jb25zdCBvdXRwdXRTdHJlYW0gPSAhIW9wdGlvbnMub3V0cHV0XHJcbiAgPyBmcy5jcmVhdGVXcml0ZVN0cmVhbShvcHRpb25zLm91dHB1dClcclxuICA6IHByb2Nlc3Muc3Rkb3V0O1xyXG5cclxucGlwZWxpbmUoXHJcbiAgaW5wdXRTdHJlYW0sXHJcbiAgdHJhbnNmb3JtU3RyZWFtLFxyXG4gIG91dHB1dFN0cmVhbSxcclxuICAoZXJyKSA9PiB7XHJcbiAgICBpZiAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1BpcGVsaW5lIGZhaWxlZC4nLCBlcnIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coJ1BpcGVsaW5lIHN1Y2NlZWRlZC4nKTtcclxuICAgIH1cclxuICB9XHJcbik7XHJcbiJdfQ==